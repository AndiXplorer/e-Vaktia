<!DOCTYPE html>
<html lang="sq">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <meta name="description" content="e-Vaktia - Orari i namazit p√´r Ramazanin 2026. Koh√´t e namazit p√´r rajonin e Prizrenit, Kosov√´."/>
  <meta name="theme-color" content="#0a0e27"/>
  <title>e-Vaktia | Ramazani 2026</title>

  <!-- CSS -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>

  <!-- Data & Moment.js -->
  <script src="./datas/data.json" type="text/javascript"></script>
  <script type="text/javascript" src="./js/moment-with-locales.min.js"></script>
</head>
<body>

  <!-- Animated Stars Background -->
  <div class="stars-container" id="starsContainer"></div>

  <!-- Navbar -->
  <nav role="navigation">
    <div class="nav-wrapper container">
      <a id="logo-container" href="#" class="brand-logo">
        <img class="responsive-img" src="mosque.png" alt="e-Vaktia">
        <span class="app-title hide-on-small-only">e-Vaktia</span>
      </a>
      <ul class="right hide-on-med-and-down">
        <li><a href="index.html"><i class="material-icons left">today</i>Orari</a></li>
        <li><a href="progress.html"><i class="material-icons left">timelapse</i>Progresi</a></li>
      </ul>
      <ul id="nav-mobile" class="sidenav">
        <li><a href="index.html"><i class="material-icons">today</i>Orari i Namazit</a></li>
        <li><a href="progress.html"><i class="material-icons">timelapse</i>Progresi i Agj√´rimit</a></li>
      </ul>
      <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="crescent-moon">&#9790;</div>
    <h1>Ramazani 2026</h1>
    <p class="subtitle">Orari i namazit &mdash; Rajoni i Prizrenit</p>
    <p class="ramadan-year">1447 Hixhri</p>
    <div class="day-counter" id="dayCounter">
      <span>Dita e</span>
      <span class="day-number" id="dayNumber">--</span>
      <span>e Ramazanit</span>
    </div>
  </section>

  <!-- Today's Prayer Times Card -->
  <section class="today-card" id="todayCard">
    <div class="card-inner">
      <div class="card-header">
        <span class="card-title" id="cardTitle">Koh√´t e sotme</span>
        <span class="card-date" id="cardDate"></span>
      </div>
      <div class="prayer-times-grid" id="prayerGrid">
        <!-- Filled by JS -->
      </div>
    </div>
  </section>

  <!-- Iftar Countdown -->
  <section class="countdown-section" id="countdownSection">
    <div class="countdown-card">
      <div class="countdown-label" id="countdownLabel">Deri n√´ Iftar</div>
      <div class="countdown-timer" id="countdownTimer">
        <div class="countdown-unit">
          <span class="number" id="countHours">00</span>
          <span class="label">Or√´</span>
        </div>
        <div class="countdown-separator">:</div>
        <div class="countdown-unit">
          <span class="number" id="countMinutes">00</span>
          <span class="label">Minuta</span>
        </div>
        <div class="countdown-separator">:</div>
        <div class="countdown-unit">
          <span class="number" id="countSeconds">00</span>
          <span class="label">Sekonda</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Ornament Divider -->
  <div class="ornament-divider"><span>&#10022;</span></div>

  <!-- Info Banner -->
  <section class="info-banner">
    <div class="banner-inner">
      <p>Diferenca e koh√´s, kur dielli per√´ndon m√´ her√´t ose m√´ von√´, p√´r shkak t√´ ndryshimit t√´ gjer√´sis√´ gjeografike ose lart√´sis√´ mbidetare, √´sht√´ p√´r qytetet:<br/>
      <b>Ferizaj:</b> -1min; <b>Gjilani:</b> -1; <b>Presheva:</b> -2; <b>Prishtina:</b> -1; <b>Podujeva:</b> -1; <b>Sharri:</b> +2; <b>Vushtria:</b> -1 min.</p>
      <p style="margin-top: 12px;"><strong>Dita e par√´ e Fit√´r-Bajramit: E premte, 20 Mars 2026</strong></p>
    </div>
  </section>

  <!-- Show More Button -->
  <div class="btn-container">
    <a id="shikoMeShume" class="waves-effect waves-light btn-large btn-ramadan">
      <i class="material-icons left">calendar_month</i>Shiko tabel√´n e plot√´
    </a>
  </div>

  <!-- Full Timetable (hidden initially) -->
  <div id="fader" style="display: none;">
    <section class="timetable-section">
      <h3 class="section-title">Tabela e plot√´ e Ramazanit</h3>
      <div style="overflow-x: auto; border-radius: 16px;">
        <table id="tedhenat" class="striped responsive-table">
          <thead>
            <tr>
              <th>Data</th>
              <th>Muaji</th>
              <th>Dita</th>
              <th style="color: var(--gold) !important;">Syfyri</th>
              <th>Sabahu</th>
              <th>Lindja e Diellit</th>
              <th>Dreka</th>
              <th>Ikindia</th>
              <th style="color: var(--gold) !important;">Akshami</th>
              <th>Jacia</th>
              <th>Gjat√´sia e dit√´s</th>
              <th>Sh√´nime</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </section>
  </div>

  <!-- Footer -->
  <footer class="footer-ramadan">
    <div class="quote-wrapper">
      <p class="dua" id="quoteArabic"></p>
      <p class="dua-translation" id="quoteTranslation"></p>
    </div>
    <div class="ornament-divider" style="margin: 20px 0;"><span>&#10022;</span></div>
    <p class="footer-text">e-Vaktia &copy; 2026 &mdash; Ramazani i bekuar</p>
  </footer>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>

  <script type="text/javascript">
    // --- Generate Stars ---
    (function generateStars() {
      var container = document.getElementById('starsContainer');
      for (var i = 0; i < 120; i++) {
        var star = document.createElement('div');
        star.className = 'star';
        var size = Math.random() * 3 + 1;
        star.style.width = size + 'px';
        star.style.height = size + 'px';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
        star.style.animationDelay = Math.random() * 5 + 's';
        container.appendChild(star);
      }
    })();

    // --- Date format used in data (DD.MM.YYYY) ---
    var DATE_FORMAT = "DD.MM.YYYY";

    // --- Helper: get data for a date ---
    function getTeDhenatByDay(dateKey) {
      if (typeof datas[dateKey] !== "object") {
        return null;
      }
      return datas[dateKey];
    }

    // --- Helper: build table row HTML ---
    function getRows(dateKey) {
      var d = getTeDhenatByDay(dateKey);
      if (!d) return '';
      try {
        var m = moment(dateKey, DATE_FORMAT).locale('sq');
        return "<td>" + m.format('DD') + "</td>" +
               "<td>" + m.format('MMMM') + "</td>" +
               "<td>" + m.format('dddd') + "</td>" +
               "<td class='dreni'>" + d.syfyri + "</td>" +
               "<td>" + d.sabahu + "</td>" +
               "<td>" + d.lindja_e_diellit + "</td>" +
               "<td>" + d.dreka + "</td>" +
               "<td>" + d.ikindia + "</td>" +
               "<td class='dreni'>" + d.akshami + "</td>" +
               "<td>" + d.jacia + "</td>" +
               "<td>" + d.gjatesia_e_dites + "</td>" +
               "<td>" + (d.shenime || '') + "</td>";
      } catch (e) {
        return '';
      }
    }

    // --- Main Logic ---
    $(document).ready(function() {
      var today = moment().format(DATE_FORMAT);
      var todayData = getTeDhenatByDay(today);
      var allKeys = Object.keys(datas);

      // --- Determine Ramadan day number ---
      var dayNum = -1;
      for (var i = 0; i < allKeys.length; i++) {
        if (allKeys[i] === today) {
          dayNum = i + 1;
          break;
        }
      }

      if (dayNum > 0) {
        document.getElementById('dayNumber').textContent = dayNum;
      } else {
        // Ramadan hasn't started or is over
        var firstDay = moment(allKeys[0], DATE_FORMAT);
        var lastDay = moment(allKeys[allKeys.length - 1], DATE_FORMAT);
        var now = moment();
        if (now.isBefore(firstDay)) {
          var daysUntil = firstDay.diff(now, 'days');
          document.getElementById('dayCounter').innerHTML = 
            '<span>Ramazani fillon pas</span> <span class="day-number">' + daysUntil + '</span> <span>dit√´ve</span>';
        } else {
          document.getElementById('dayCounter').innerHTML = 
            '<span>Ramazani ka p√´rfunduar</span>';
        }
      }

      // --- Fill today's prayer card ---
      if (todayData) {
        var dateDisplay = moment(today, DATE_FORMAT).locale('sq');
        document.getElementById('cardDate').textContent = 
          dateDisplay.format('dddd, DD MMMM YYYY');

        var prayers = [
          { name: 'Syfyri', time: todayData.syfyri, icon: 'üåô', highlight: true },
          { name: 'Sabahu', time: todayData.sabahu, icon: 'üïå', highlight: false },
          { name: 'Lindja', time: todayData.lindja_e_diellit, icon: 'üåÖ', highlight: false },
          { name: 'Dreka', time: todayData.dreka, icon: '‚òÄÔ∏è', highlight: false },
          { name: 'Ikindia', time: todayData.ikindia, icon: 'üå§Ô∏è', highlight: false },
          { name: 'Akshami', time: todayData.akshami, icon: 'üåá', highlight: true },
          { name: 'Jacia', time: todayData.jacia, icon: 'üåÉ', highlight: false }
        ];

        var gridHTML = '';
        for (var p = 0; p < prayers.length; p++) {
          gridHTML += '<div class="prayer-time-item' + (prayers[p].highlight ? ' highlight' : '') + '">' +
                      '<div class="prayer-icon">' + prayers[p].icon + '</div>' +
                      '<div class="prayer-name">' + prayers[p].name + '</div>' +
                      '<div class="prayer-time">' + prayers[p].time + '</div>' +
                      '</div>';
        }
        document.getElementById('prayerGrid').innerHTML = gridHTML;

        // --- Iftar Countdown ---
        function updateCountdown() {
          var now = moment();
          var syfyriTime = moment(todayData.syfyri, "HH:mm");
          var akshamiTime = moment(todayData.akshami, "HH:mm");
          var labelEl = document.getElementById('countdownLabel');
          var target;

          if (now.isBefore(syfyriTime)) {
            // Before syfyri - count down to syfyri (suhoor)
            target = syfyriTime;
            labelEl.textContent = 'Deri n√´ Syfyr (Suhur)';
          } else if (now.isBefore(akshamiTime)) {
            // During fast - count down to iftar
            target = akshamiTime;
            labelEl.textContent = 'Deri n√´ Iftar';
          } else {
            // After iftar
            labelEl.textContent = 'Iftari ka kaluar';
            document.getElementById('countHours').textContent = '00';
            document.getElementById('countMinutes').textContent = '00';
            document.getElementById('countSeconds').textContent = '00';
            return;
          }

          var diff = moment.duration(target.diff(now));
          var hours = Math.floor(diff.asHours());
          var minutes = diff.minutes();
          var seconds = diff.seconds();

          document.getElementById('countHours').textContent = String(hours).padStart(2, '0');
          document.getElementById('countMinutes').textContent = String(minutes).padStart(2, '0');
          document.getElementById('countSeconds').textContent = String(seconds).padStart(2, '0');
        }

        updateCountdown();
        setInterval(updateCountdown, 1000);

      } else {
        // No data for today
        document.getElementById('prayerGrid').innerHTML = 
          '<div style="grid-column: 1/-1; text-align:center; padding: 30px; color: var(--text-secondary);">' +
          '<p style="font-size: 1.2rem;">Nuk ka t√´ dh√´na p√´r sot.</p>' +
          '<p style="font-size: 0.9rem; margin-top: 10px;">Ramazani 2026: 19 Shkurt - 19 Mars</p>' +
          '</div>';
        document.getElementById('countdownSection').style.display = 'none';
      }

      // --- "Show More" button ---
      $("#shikoMeShume").on("click", function() {
        $('#fader').slideDown(600);
        $(this).fadeOut(300);

        // Fill the full timetable
        var tbody = $('#tedhenat tbody');
        for (var i = 0; i < allKeys.length; i++) {
          var rowClass = (allKeys[i] === today) ? 'id="strong"' : '';
          var rowHTML = getRows(allKeys[i]);
          if (rowHTML) {
            tbody.append('<tr ' + rowClass + '>' + rowHTML + '</tr>');
          }
        }

        // Scroll to the table
        setTimeout(function() {
          $('html, body').animate({
            scrollTop: $('#fader').offset().top - 80
          }, 500);
        }, 300);
      });
    });

    // --- Rotating Footer Quotes ---
    (function() {
      var quotes = [
        { arabic: "\u0627\u0644\u0644\u0647\u0645 \u0625\u0646\u0643 \u0639\u0641\u0648 \u062a\u062d\u0628 \u0627\u0644\u0639\u0641\u0648 \u0641\u0627\u0639\u0641 \u0639\u0646\u064a", translation: "\"O Zoti im, Ti je Fal\u00ebs, e do faljen, prandaj m\u00eb fal mua.\" \u2014 Tirmidhi" },
        { arabic: "\u0634\u0647\u0631 \u0631\u0645\u0636\u0627\u0646 \u0627\u0644\u0630\u064a \u0623\u0646\u0632\u0644 \u0641\u064a\u0647 \u0627\u0644\u0642\u0631\u0622\u0646", translation: "\"Muaji i Ramazanit, n\u00eb t\u00eb cilin \u00ebsht\u00eb zbritur Kur'ani.\" \u2014 Bekare 2:185" },
        { arabic: "\u0648\u0625\u0630\u0627 \u0633\u0623\u0644\u0643 \u0639\u0628\u0627\u062f\u064a \u0639\u0646\u064a \u0641\u0625\u0646\u064a \u0642\u0631\u064a\u0628", translation: "\"Kur rob\u00ebrit e Mi t\u00eb pyesin p\u00ebr Mua, Un\u00eb jam af√´r.\" \u2014 Bekare 2:186" },
        { arabic: "\u0625\u0646 \u0627\u0644\u0644\u0647 \u0645\u0639 \u0627\u0644\u0635\u0627\u0628\u0631\u064a\u0646", translation: "\"V\u00ebrtet\u00eb, All-llahu \u00ebsht\u00eb me durimtar\u00ebt.\" \u2014 Bekare 2:153" },
        { arabic: "\u0631\u0628\u0646\u0627 \u0622\u062a\u0646\u0627 \u0641\u064a \u0627\u0644\u062f\u0646\u064a\u0627 \u062d\u0633\u0646\u0629 \u0648\u0641\u064a \u0627\u0644\u0622\u062e\u0631\u0629 \u062d\u0633\u0646\u0629", translation: "\"Zoti yn\u00eb, na jep t\u00eb mir\u00eb n\u00eb k\u00ebt\u00eb bot\u00eb dhe n\u00eb bot\u00ebn tjet\u00ebr.\" \u2014 Bekare 2:201" },
        { arabic: "\u0641\u0627\u0630\u0643\u0631\u0648\u0646\u064a \u0623\u0630\u0643\u0631\u0643\u0645 \u0648\u0627\u0634\u0643\u0631\u0648\u0627 \u0644\u064a \u0648\u0644\u0627 \u062a\u0643\u0641\u0631\u0648\u0646", translation: "\"M\u00eb kujtoni Mua, q\u00eb Un\u00eb t'ju kujtoj juve.\" \u2014 Bekare 2:152" },
        { arabic: "\u0645\u0646 \u0635\u0627\u0645 \u0631\u0645\u0636\u0627\u0646 \u0625\u064a\u0645\u0627\u0646\u0627 \u0648\u0627\u062d\u062a\u0633\u0627\u0628\u0627 \u063a\u0641\u0631 \u0644\u0647 \u0645\u0627 \u062a\u0642\u062f\u0645 \u0645\u0646 \u0630\u0646\u0628\u0647", translation: "\"Kush agj\u00ebron Ramazanin me besim, i falen m\u00ebkatet e m\u00ebparshme.\" \u2014 Buhari" },
        { arabic: "\u0625\u0646 \u0645\u0639 \u0627\u0644\u0639\u0633\u0631 \u064a\u0633\u0631\u0627", translation: "\"V\u00ebrtet\u00eb, me v\u00ebshtir\u00ebsin\u00eb vjen leht\u00ebsimi.\" \u2014 Inshirah 94:6" },
        { arabic: "\u0648\u0645\u0646 \u064a\u062a\u0648\u0643\u0644 \u0639\u0644\u0649 \u0627\u0644\u0644\u0647 \u0641\u0647\u0648 \u062d\u0633\u0628\u0647", translation: "\"Kush i mbshtetet All-llahut, Ai i mjafton atij.\" \u2014 Talak 65:3" },
        { arabic: "\u0627\u0644\u0635\u0648\u0645 \u062c\u0646\u0629", translation: "\"Agj\u00ebrimi \u00ebsht\u00eb mburoj√´.\" \u2014 Buhari" },
        { arabic: "\u0627\u062f\u0639\u0648\u0646\u064a \u0623\u0633\u062a\u062c\u0628 \u0644\u0643\u0645", translation: "\"M\u00eb lutu Mua, Un\u00eb ju p\u00ebrgjigjem.\" \u2014 Gafir 40:60" },
        { arabic: "\u0648\u0644\u0627 \u062a\u064a\u0623\u0633\u0648\u0627 \u0645\u0646 \u0631\u0648\u062d \u0627\u0644\u0644\u0647", translation: "\"Mos e humbni shpres\u00ebn n\u00eb m\u00ebshir\u00ebn e All-llahut.\" \u2014 Jusuf 12:87" }
      ];

      var currentIndex = Math.floor(Math.random() * quotes.length);
      var arabicEl = document.getElementById('quoteArabic');
      var translationEl = document.getElementById('quoteTranslation');

      function showQuote(index) {
        arabicEl.textContent = quotes[index].arabic;
        translationEl.textContent = quotes[index].translation;
      }

      function rotateQuote() {
        arabicEl.classList.add('fade-out');
        translationEl.classList.add('fade-out');

        setTimeout(function() {
          currentIndex = (currentIndex + 1) % quotes.length;
          showQuote(currentIndex);
          arabicEl.classList.remove('fade-out');
          translationEl.classList.remove('fade-out');
        }, 600);
      }

      showQuote(currentIndex);
      setInterval(rotateQuote, 8000);
    })();
  </script>
</body>
</html>
